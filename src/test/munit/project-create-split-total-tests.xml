<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
    <munit:config name="munit" doc:name="MUnit configuration"/>
    <spring:beans>
        <spring:import resource="classpath:aria.xml"/>
        <spring:import resource="classpath:aria-lookups.xml"/>
        <spring:import resource="classpath:error-handling.xml"/>
        <spring:import resource="classpath:globals.xml"/>
        <spring:import resource="classpath:mdr-upserts.xml"/>
        <spring:import resource="classpath:mdr-xrefs.xml"/>
        <spring:import resource="classpath:dso.xml"/>
        <spring:import resource="classpath:dso-auth.xml"/>
        <spring:import resource="classpath:oracle.xml"/>
        <spring:import resource="classpath:oracle-auth.xml"/>
        <spring:import resource="classpath:oracle-lookups.xml"/>
        <spring:import resource="classpath:projects.xml"/>
        <spring:import resource="classpath:sfdc.xml"/>
        <spring:import resource="classpath:sfdc-lookups.xml"/>
    </spring:beans>
    <munit:test name="project-create-split-total-tests" description="Test">
        <set-payload value="{&quot;activeDate&quot;:&quot;2017-08-01&quot;,&quot;adminEmail&quot;:&quot;john.zamow@merrillcorp.com&quot;,&quot;ariaCreation&quot;:&quot;OK&quot;,&quot;billingEffectiveDate&quot;:&quot;2017-08-04&quot;,&quot;businessUnit&quot;:&quot;Datasite&quot;,&quot;closureMediaInclude&quot;:&quot;1.0&quot;,&quot;continuationDate&quot;:&quot;2017-09-01&quot;,&quot;continuationRate&quot;:&quot;0.06&quot;,&quot;continuationRateSM&quot;:&quot;1.1&quot;,&quot;contractCustomer&quot;:&quot;name, 1 Main St St Paul MN 55101,Contact&quot;,&quot;contractTerm&quot;:&quot;1.0&quot;,&quot;countryOfIssuer&quot;:&quot;US&quot;,&quot;createdAt&quot;:&quot;2017-08-02T15:58:07.000Z&quot;,&quot;currency&quot;:&quot;USD&quot;,&quot;dataCenter&quot;:&quot;US&quot;,&quot;datasiteOneId&quot;:null,&quot;hibernationRate&quot;:&quot;0.05&quot;,&quot;hibernationRateSM&quot;:&quot;1.0&quot;,&quot;legalEntity&quot;:&quot;010 - MERRILL COMMUNICATIONS LLC&quot;,&quot;minimumFee&quot;:&quot;500.0&quot;,&quot;modifiedAt&quot;:&quot;2017-08-02T15:58:47.000Z&quot;,&quot;name&quot;:&quot;MS Testing Aug 2 5&quot;,&quot;operatingUnitId&quot;:&quot;21&quot;,&quot;operatingUnitName&quot;:&quot;US_OU-MERRILL CORPORATION&quot;,&quot;primaryServiceSite&quot;:&quot;STP&quot;,&quot;productType&quot;:&quot;Asset Purchase&quot;,&quot;payloadCreateDate&quot;:&quot;2017-08-01&quot;,&quot;projectSfdcId&quot;:&quot;a27c0000005RdaaAAC&quot;,&quot;projectStatus&quot;:&quot;Active&quot;,&quot;retroStartDate&quot;:null,&quot;revenueSite&quot;:&quot;STP&quot;,&quot;sales&quot;:null,&quot;specialMediaRate&quot;:&quot;15.0&quot;,&quot;tier1Rate&quot;:&quot;0.04&quot;,&quot;tier1UpperLimit&quot;:&quot;500.0&quot;,&quot;tier2Rate&quot;:&quot;0.03&quot;,&quot;tier2UpperLimit&quot;:&quot;1000.0&quot;,&quot;tier3Rate&quot;:&quot;0.02&quot;,&quot;tier3UpperLimit&quot;:null,&quot;tier4Rate&quot;:null,&quot;tier4UpperLimit&quot;:null,&quot;tier5Rate&quot;:null,&quot;tier5UpperLimit&quot;:null,&quot;tier6Rate&quot;:null,&quot;tier6UpperLimit&quot;:null,&quot;tier7Rate&quot;:null,&quot;tier7UpperLimit&quot;:null,&quot;tier8Rate&quot;:null,&quot;tier8UpperLimit&quot;:null,&quot;tier9Rate&quot;:null,&quot;tier9UpperLimit&quot;:null,&quot;tier10Rate&quot;:null,&quot;tier10UpperLimit&quot;:null,&quot;unitOfMeasure&quot;:&quot;Page&quot;,&quot;companies&quot;:[{&quot;customerOrderNumber&quot;:null,&quot;email&quot;:&quot;z2@gmail.com&quot;,&quot;firstName&quot;:&quot;T&quot;,&quot;lastName&quot;:&quot;Brownie&quot;,&quot;name&quot;:&quot;DSOC-383&quot;,&quot;phone&quot;:null,&quot;sfdcId&quot;:&quot;a3jc0000000IpmUAAS&quot;,&quot;retroChange&quot;:false,&quot;billingSplit&quot;:&quot;99.0&quot;,&quot;billingAddress&quot;:{&quot;address1&quot;:&quot;15407 McGinty Rd W&quot;,&quot;address2&quot;:null,&quot;address3&quot;:null,&quot;city&quot;:&quot;Wayzata&quot;,&quot;country&quot;:&quot;US&quot;,&quot;locality&quot;:null,&quot;middleInitial&quot;:null,&quot;name&quot;:&quot;BA-011&quot;,&quot;oracleSiteId&quot;:&quot;169463&quot;,&quot;postalCode&quot;:&quot;55391&quot;,&quot;sfdcId&quot;:&quot;a3hc0000000FBxkAAG&quot;,&quot;stateProvince&quot;:&quot;MN&quot;},&quot;billingCompany&quot;:{&quot;name&quot;:&quot;Cargill Incorporated&quot;,&quot;oracleAccountId&quot;:&quot;155538&quot;,&quot;sfdcId&quot;:&quot;a3ic0000000jnxYAAQ&quot;,&quot;vatRegistration&quot;:null}},
{&quot;customerOrderNumber&quot;:null,&quot;email&quot;:&quot;z2@gmail.com&quot;,&quot;firstName&quot;:&quot;Z&quot;,&quot;lastName&quot;:&quot;Brown&quot;,&quot;name&quot;:&quot;DSOC-383&quot;,&quot;phone&quot;:null,&quot;sfdcId&quot;:&quot;a3jc0000000IpmUAAS&quot;,&quot;retroChange&quot;:false,&quot;billingSplit&quot;:&quot;10.&quot;,&quot;billingAddress&quot;:{&quot;address1&quot;:&quot;15407 McGinty Rd W&quot;,&quot;address2&quot;:null,&quot;address3&quot;:null,&quot;city&quot;:&quot;Wayzata&quot;,&quot;country&quot;:&quot;US&quot;,&quot;locality&quot;:null,&quot;middleInitial&quot;:null,&quot;name&quot;:&quot;BA-011&quot;,&quot;oracleSiteId&quot;:&quot;169463&quot;,&quot;postalCode&quot;:&quot;55391&quot;,&quot;sfdcId&quot;:&quot;a3hc0000000FBxkAAG&quot;,&quot;stateProvince&quot;:&quot;MN&quot;},&quot;billingCompany&quot;:{&quot;name&quot;:&quot;Cargill Incorporated&quot;,&quot;oracleAccountId&quot;:&quot;155538&quot;,&quot;sfdcId&quot;:&quot;a3ic0000000jnxYAAQ&quot;,&quot;vatRegistration&quot;:null}}]}]}
" mimeType="application/json" doc:name="Set Payload"/>
        <flow-ref name="startProjectProcess" doc:name="startProjectProcess"/>
        <munit:assert-on-equals message="Split Percentage did not fail" expectedValue="#[109]" actualValue="#[flowVars.total.splitTotal]" doc:name="Assert Equals"/>
    </munit:test>
</mule>
